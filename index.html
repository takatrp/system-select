<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>FXクラウドシリーズ 選定フローチャート簡易診断</title>
  <meta name="description" content="FXクラウドシリーズの自計化構成を、YES／NOで簡単に診断できるチェックツールです。">

  <style>
    :root{
      --bg:#f4f9fb;
      --card:#ffffff;
      --ink:#1e2a2d;
      --muted:#5a6a6d;
      --accent:#578899;
      --accent-dark:#476a7c;
      --accent-soft:rgba(87,136,153,.08);
      --border:#dde5ea;
    }

    *{box-sizing:border-box;}

    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",sans-serif;
      background:var(--bg);
      color:var(--ink);
    }

    .app{
      max-width:900px;
      margin:0 auto;
      padding:24px 16px 40px;
    }

    h1{
      font-size:1.6rem;
      margin:0 0 .3rem;
    }

    p{
      line-height:1.7;
      margin:.25rem 0 .5rem;
    }

    .progress{
      margin:16px 0 20px;
      height:8px;
      border-radius:999px;
      background:#dde5ea;
      overflow:hidden;
    }

    .progress-bar{
      height:100%;
      width:0%;
      background:var(--accent);
      transition:width .25s ease;
    }

    .question-card{
      background:var(--card);
      border-radius:12px;
      box-shadow:0 4px 18px rgba(0,0,0,.05);
      padding:20px 18px 18px;
    }

    .q-number{
      font-size:.85rem;
      color:var(--muted);
      margin-bottom:4px;
    }

    .q-title{
      font-weight:600;
      margin-bottom:6px;
      font-size:1.02rem;
    }

    .q-category{
      display:inline-block;
      font-size:.8rem;
      padding:2px 8px;
      border-radius:999px;
      background:#eef3f6;
      color:var(--accent-dark);
      margin-left:4px;
    }

    .q-text{
      margin-bottom:12px;
      line-height:1.7;
    }

    .point-label{
      font-size:.8rem;
      font-weight:600;
      color:var(--accent-dark);
      letter-spacing:.04em;
    }

    .point-box{
      margin-top:4px;
      padding:10px 12px;
      border-left:3px solid var(--accent);
      background:var(--accent-soft);
      font-size:.9rem;
      line-height:1.7;
    }

    .btn-row{
      margin-top:14px;
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    button{
      border-radius:999px;
      border:1px solid transparent;
      padding:8px 18px;
      font-size:.95rem;
      cursor:pointer;
      font-family:inherit;
      background:#fff;
      transition:background .15s ease,border-color .15s ease,color .15s ease,transform .05s ease;
    }

    button:active{
      transform:translateY(1px);
    }

    .btn-yes{
      background:var(--accent);
      color:#fff;
    }

    .btn-yes:hover{
      background:var(--accent-dark);
    }

    .btn-no{
      background:#fff;
      color:var(--accent);
      border-color:var(--accent);
    }

    .btn-no:hover{
      background:#eef3f6;
    }

    .btn-back{
      margin-right:auto;
      background:transparent;
      color:var(--muted);
      border-color:transparent;
      padding-left:0;
    }

    .btn-back:hover{
      text-decoration:underline;
      background:transparent;
    }

    .result{
      display:none;
      margin-top:12px;
    }

    .result h2{
      margin-top:0;
      margin-bottom:.5rem;
    }

    .badge{
      display:inline-block;
      padding:4px 10px;
      font-size:.8rem;
      border-radius:999px;
      background:#eef3f6;
      color:var(--accent-dark);
      margin-right:4px;
      margin-bottom:4px;
    }

    .summary-grid{
      display:grid;
      grid-template-columns:minmax(0,2fr) minmax(0,3fr);
      gap:16px;
      margin-top:12px;
    }

    @media (max-width:720px){
      .summary-grid{
        grid-template-columns:1fr;
      }
    }

    .summary-grid h3{
      margin:.8rem 0 .3rem;
      font-size:1rem;
    }

    .summary-grid ul{
      margin:.25rem 0 .25rem 1.1rem;
      padding:0;
      font-size:.9rem;
    }

    .answers-table{
      width:100%;
      border-collapse:collapse;
      font-size:.9rem;
      margin-top:16px;
    }

    .answers-table th,
    .answers-table td{
      border:1px solid var(--border);
      padding:6px 8px;
      vertical-align:top;
    }

    .answers-table th{
      background:#f3f6f8;
      text-align:left;
      font-weight:600;
    }

    .answers-table td:nth-child(1){
      white-space:nowrap;
    }

    .answer-yes{
      color:#00695c;
      font-weight:600;
    }

    .answer-no{
      color:#b71c1c;
      font-weight:600;
    }

    .note{
      margin-top:12px;
      font-size:.8rem;
      color:var(--muted);
      line-height:1.6;
    }
  </style>
</head>
<body>
<div class="app">
  <h1>FXクラウドシリーズ 選定フローチャート簡易診断</h1>
  <p>
    貴社の自計化ニーズについて、YES／NOを選ぶだけでおすすめの構成とポイントを整理します。<br>
    （「FXクラウドシリーズ選定フローチャート（自計化提案打ち合わせシート）」をベースにした簡易ツール）
  </p>

  <div class="progress">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <div id="questionArea" class="question-card"></div>

  <div id="resultArea" class="result"></div>
</div>

<script>
  /******************************************************************
   * 質問・POINT（PDF中央～右側相当）
   * 質問番号：配列の順番＝1〜13問目
   ******************************************************************/
  const questions = [
    {
      id: "accountsStructure", // Q1
      title: "勘定科目体系",
      category: "会計・管理会計",
      question: "財務三表とは別に、管理目的に応じて勘定科目を自由に設計・追加・並べ替えしたいですか？",
      point: "財務三表科目とは異なる勘定科目（コード）での設計および追加、並べ替えができます。また、複数の科目残高を合算する「小計科目」の登録、貸借対照表科目の部門別残高管理もできます。"
    },
    {
      id: "subAccount", // Q2
      title: "同一科目の取引先別／口座別管理併用",
      category: "会計・管理会計",
      question: "同じ勘定科目について、取引先別や口座別などを組み合わせて残高管理をしたいですか？",
      point: "１つの勘定科目に対して取引先別＋口座別等の併用管理ができます。例えば、預り金を取引先＋口座別のような運用が可能です。"
    },
    {
      id: "deptPerformance", // Q3
      title: "部門業績管理（階層構造）",
      category: "部門管理",
      question: "地域別・店舗別・担当者別など、階層構造を持った部門業績管理を行いたいですか？",
      point: "部門を階層別・グループ別に管理し、地域毎・店舗毎・担当者ごとの業績管理など、多様な切り口で部門業績を確認できます。"
    },
    {
      id: "deptBalance", // Q4
      title: "部門別債権・債務管理",
      category: "部門管理",
      question: "売掛金・買掛金などの債権債務についても部門別に残高管理を行いたいですか？（本支店会計を含む）",
      point: "債権債務の取引先別残高を部門ごとに管理し、本支店会計を部門で行うことも可能です。"
    },
    {
      id: "deptPermission", // Q5
      title: "部門ごとの閲覧・入力権限",
      category: "部門管理・統制",
      question: "自部門のデータだけを閲覧・入力できるようにするなど、部門ごとの参照・入力権限を制御したいですか？",
      point: "経理担当者ごとに参照可能部門を制限し、自部門のデータのみ閲覧・入力できるようにする等の運用に対応できます。"
    },
    {
      id: "voucherWorkflow", // Q6
      title: "証憑保存・ワークフロー",
      category: "証憑保存・内部統制",
      question: "各部門・支店からオンラインで証憑を保存し、経費申請～承認～仕訳計上までのワークフローを構築したいですか？",
      point: "オプション「インボイス・マネジャー（FX4クラウド）」により、FX4クラウド未登録のパソコンから証憑保存ができ、多段階承認による経費申請～承認～保存＆仕訳計上を実現できます。"
    },
    {
      id: "excelJournal", // Q7
      title: "Excel日報・出納帳からの仕訳計上",
      category: "仕訳自動化",
      question: "Excelで作成している日報・出納帳などから、仕訳を自動・半自動で取り込みたいですか？",
      point: "Excel作成の日報や出納帳から、FX4クラウドを起動させることなく仕訳を計上できます。部門共通費の部門配賦等と組み合わせた運用も可能です。"
    },
    {
      id: "systemJournal", // Q8
      title: "業務システムからの仕訳取込",
      category: "仕訳自動化",
      question: "販売管理・給与・生産管理など、既存の業務システムの出力データを活用して仕訳を計上したいですか？",
      point: "仕訳読込テンプレート設計機能により、業務システムの出力データを加工することなく仕訳計上できます。明細単位での仕訳計上により、詳細な財務分析が可能です。"
    },
    {
      id: "groupManagement", // Q9
      title: "グループ会社の一元業績管理",
      category: "グループ管理",
      question: "複数のグループ会社をまとめて一元的に業績管理し、内部取引の相殺なども行いたいですか？",
      point: "グループ会社全体の業績を一元管理し、グループ全体業績をタイムリーかつ効率的に把握できます。"
    },
    {
      id: "ipoControl", // Q10
      title: "IPO・内部統制対応",
      category: "内部統制・IPO",
      question: "株式上場（IPO）や高度な内部統制（IT全般統制・IT業務処理統制）への対応を視野に入れていますか？",
      point: "株式上場（IPO）や高度な内部統制が必要な場合には、IT全般統制・IT業務処理統制に対応したシステム構成が重要です。"
    },
    {
      id: "payManagement", // Q11
      title: "支払管理機能",
      category: "オプション：支払管理",
      question: "売掛金の回収予定・買掛金の支払予定・借入金返済・手形決済など、入金・支払予定を一覧で管理したいですか？",
      point: "仕入仕訳をもとに支払予定をカレンダー形式で管理し、銀行振込データを作成する等、支払をシステムで一元管理できます。"
    },
    {
      id: "payroll", // Q12
      title: "給与計算機能",
      category: "オプション：給与計算",
      question: "給与計算をする社員数が30人以上、または複数事業所があり、給与計算の合理化・賃金配分の見える化を行いたいですか？",
      point: "給与計算をする社員数が30人以上、または複数事業所がある場合には、クラウド給与システムとの連携が有効です。（FXまいスタークラウドは30人まで）"
    },
    {
      id: "reportDesign", // Q13
      title: "独自帳票設計（設計マネジメント等）",
      category: "オプション：帳票設計・経営資料",
      question: "関与先独自の管理資料（Excel等）を、会計データから自動作成できるようにしたいですか？",
      point: "ExcelからFXクラウドシリーズのデータにアクセスし、自動でデータを取得することで、独自の管理資料を効率的に作成できます。"
    }
  ];

  const answers = {};
  let currentIndex = 0;

  function updateProgress() {
    const bar = document.getElementById("progressBar");
    const total = questions.length;
    const ratio = Math.min(currentIndex, total) / total;
    bar.style.width = (ratio * 100) + "%";
  }

  function renderQuestion() {
    const total = questions.length;
    const q = questions[currentIndex];
    const area = document.getElementById("questionArea");
    const resultArea = document.getElementById("resultArea");

    area.style.display = "block";
    resultArea.style.display = "none";

    updateProgress();

    area.innerHTML = `
      <div class="q-number">
        質問 ${currentIndex + 1} / ${total}
        <span class="q-category">${q.category}</span>
      </div>
      <div class="q-title">${q.title}</div>
      <div class="q-text">${q.question}</div>
      <div class="point-label">POINT</div>
      <div class="point-box">${q.point}</div>
      <div class="btn-row">
        ${currentIndex > 0 ? '<button type="button" class="btn-back" id="backBtn">← 戻る</button>' : ""}
        <button type="button" class="btn-no" data-answer="no">NO</button>
        <button type="button" class="btn-yes" data-answer="yes">YES</button>
      </div>
    `;

    area.querySelectorAll("[data-answer]").forEach(btn => {
      btn.addEventListener("click", () => {
        const answer = btn.getAttribute("data-answer");
        answers[q.id] = answer;
        currentIndex++;
        if (currentIndex < total) {
          renderQuestion();
        } else {
          // ★ 全13問回答後にのみ結果表示
          showResult();
        }
      });
    });

    const backBtn = area.querySelector("#backBtn");
    if (backBtn) {
      backBtn.addEventListener("click", () => {
        currentIndex = Math.max(0, currentIndex - 1);
        renderQuestion();
      });
    }
  }

  function showResult() {
    const area = document.getElementById("questionArea");
    const resultArea = document.getElementById("resultArea");
    const total = questions.length;
    const yesCount = questions.filter(q => answers[q.id] === "yes").length;

    // ロジック：
    // ・1〜9まででYESがあれば FX4クラウド
    // ・それがなく、10〜13でYESがあれば FX2クラウド
    // ・1〜13すべてNOなら FXまいスタークラウド
    const yesFirstBlock = questions.slice(0, 9).some(q => answers[q.id] === "yes");
    const yesSecondBlock = questions.slice(9, 13).some(q => answers[q.id] === "yes");

    let recommendedSystem = "";
    let recommendedNote = "";
    let level = "";
    let detail = "";

    if (yesFirstBlock) {
      recommendedSystem = "FX4クラウド";
      level = "グループ管理・内部統制まで意識した高度構成";
      detail = "1〜9の設問（管理会計・部門管理・証憑ワークフロー・グループ管理など）でニーズがあるため、高度な管理会計・部門管理・内部統制を前提とした構成が望ましいと考えられます。";
      recommendedNote = "左側の「青い四角」に該当し、部門管理・グループ管理・ワークフローまで含めた構成としてFX4クラウドを中核に検討する想定です。";
    } else if (yesSecondBlock) {
      recommendedSystem = "FX2クラウド";
      level = "管理会計・オプション機能を備えた標準構成";
      detail = "10〜13の設問（支払管理・給与計算・帳票設計・内部統制など）でニーズがありつつ、1〜9には該当しないため、標準的な自計化＋必要なオプションを付加した構成が適していると考えられます。";
      recommendedNote = "左側の「緑の四角」に該当し、FX2クラウドを中心に、必要に応じて支払管理や給与計算、帳票設計などのオプションを組み合わせる想定です。";
    } else {
      recommendedSystem = "FXまいスタークラウド";
      level = "シンプル自計化構成（小規模向け）";
      detail = "1〜13の設問すべてでNOとなっているため、高度な部門管理・グループ管理・内部統制までは現時点では不要と考えられます。";
      recommendedNote = "下側の「オレンジの四角」に該当し、取引が比較的シンプルで小規模な関与先向けにFXまいスタークラウドを前提とする構成が想定されます。";
    }

    // カテゴリ別集計（参考情報）
    const categoryStats = {};
    questions.forEach(q => {
      if (!categoryStats[q.category]) {
        categoryStats[q.category] = { yes: 0, total: 0 };
      }
      categoryStats[q.category].total++;
      if (answers[q.id] === "yes") {
        categoryStats[q.category].yes++;
      }
    });

    let categoryHtml = "<ul>";
    Object.entries(categoryStats).forEach(([cat, stat]) => {
      categoryHtml += `<li>${cat}: YES ${stat.yes} / ${stat.total}</li>`;
    });
    categoryHtml += "</ul>";

    // 回答一覧
    let answersHtml = `
      <table class="answers-table">
        <thead>
          <tr>
            <th>カテゴリ</th>
            <th>質問</th>
            <th>回答</th>
            <th>POINT（要件のポイント）</th>
          </tr>
        </thead>
        <tbody>
    `;
    questions.forEach(q => {
      const a = answers[q.id] || "-";
      const cls = a === "yes" ? "answer-yes" : (a === "no" ? "answer-no" : "");
      const label = a === "yes" ? "YES" : (a === "no" ? "NO" : "-");
      answersHtml += `
        <tr>
          <td>${q.category}</td>
          <td>${q.title}</td>
          <td class="${cls}">${label}</td>
          <td>${q.point}</td>
        </tr>
      `;
    });
    answersHtml += "</tbody></table>";

    document.getElementById("progressBar").style.width = "100%";
    area.style.display = "none";

    resultArea.innerHTML = `
      <div class="question-card">
        <h2>診断結果</h2>
        <p>
          <span class="badge">YESの数：${yesCount} / ${total}</span>
        </p>

        <h3>おすすめのシステム</h3>
        <p>
          今回の回答からの<strong>おすすめのシステムは「${recommendedSystem}」です。</strong>
        </p>
        <p>${recommendedNote}</p>

        <div class="summary-grid">
          <div>
            <h3>推奨レベル（全体像）</h3>
            <p><strong>${level}</strong></p>
            <p>${detail}</p>

            <h3>カテゴリ別の傾向（参考）</h3>
            ${categoryHtml}
          </div>

          <div>
            <h3>補足コメント</h3>
            <p style="font-size:.9rem;">
              ・FX4クラウド：左側の青い四角に対応する、高度な管理会計・部門管理・内部統制を前提とした構成。<br>
              ・FX2クラウド：左側の緑の四角に対応する、標準的な自計化の中核となる構成。<br>
              ・FXまいスタークラウド：下側のオレンジの四角に対応する、小規模・シンプルな顧問先向け構成。<br>
            </p>
          </div>
        </div>

        <h3 style="margin-top:20px;">回答とPOINTの一覧</h3>
        ${answersHtml}

        <div class="note">
          ※ 本ツールのロジックは「1〜9でYES→FX4、10〜13でYES→FX2、すべてNO→FXまいスター」という簡易判定に基づいています。<br>
          ※ 実際の提案では、売上規模・従業員数・既存システムとの連携状況等も踏まえ、担当者の判断で微調整してください。<br>
          ※ ロジックを変更する場合は、showResult関数内の条件分岐を書き換えることで対応可能です。
        </div>
      </div>
    `;

    resultArea.style.display = "block";
  }

  // 初期表示
  renderQuestion();
</script>
</body>
</html>