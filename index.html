<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>FXã‚¯ãƒ©ã‚¦ãƒ‰ã‚·ãƒªãƒ¼ã‚º å°å…¥è¨ºæ–­ãƒãƒ£ãƒ¼ãƒˆ</title>
  <meta name="description" content="è²´ç¤¾ã«æœ€é©ãªFXã‚¯ãƒ©ã‚¦ãƒ‰ã‚·ãƒªãƒ¼ã‚ºã®æ§‹æˆã‚’ã€YESï¼NOã§ç°¡å˜ã«è¨ºæ–­ã§ãã‚‹ãƒã‚§ãƒƒã‚¯ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚">

  <style>
    :root{
      --bg:#f4f9fb;
      --card:#ffffff;
      --ink:#1e2a2d;
      --muted:#5a6a6d;
      --accent:#578899;
      --accent-dark:#476a7c;
      --accent-soft:rgba(87,136,153,.08);
      --border:#dde5ea;
      --highlight-bg:#eef6f9;
    }

    *{box-sizing:border-box;}

    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",sans-serif;
      background:var(--bg);
      color:var(--ink);
    }

    .app{
      max-width:900px;
      margin:0 auto;
      padding:24px 16px 40px;
    }

    h1{
      font-size:1.6rem;
      margin:0 0 .3rem;
      color: var(--accent-dark);
    }

    p{
      line-height:1.7;
      margin:.25rem 0 .5rem;
    }

    .intro-text {
      color: var(--ink);
      margin-bottom: 20px;
    }

    .progress{
      margin:16px 0 20px;
      height:8px;
      border-radius:999px;
      background:#dde5ea;
      overflow:hidden;
    }

    .progress-bar{
      height:100%;
      width:0%;
      background:var(--accent);
      transition:width .25s ease;
    }

    /* --- ã‚«ãƒ¼ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³ --- */
    .question-card{
      background:var(--card);
      border-radius:12px;
      box-shadow:0 4px 18px rgba(0,0,0,.05);
      padding:20px 24px;
      display:flex;
      flex-direction:column;
      /* ç”»åƒãŒå…¥ã‚‹ãŸã‚é«˜ã•ã‚’ç¢ºä¿ */
      height:620px; 
      position: relative;
    }

    .q-header-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:10px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 8px;
    }

    .q-number{
      font-size:.85rem;
      color:var(--muted);
      font-weight: bold;
    }

    .q-title-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
    }

    .q-title{
      font-weight:600;
      font-size:0.9rem; 
      color: var(--muted);
      margin:0;
    }

    .q-category{
      display:inline-block;
      font-size:.75rem;
      padding:2px 8px;
      border-radius:4px;
      background:var(--accent-soft);
      color:var(--accent-dark);
      font-weight: 600;
    }

    .q-main{
      flex:1;
      overflow-y:auto;
      padding-right:4px;
      display: flex;
      flex-direction: column;
    }

    /* --- ç”»åƒã‚¹ã‚¿ã‚¤ãƒ« --- */
    .q-image-container {
      width: 100%;
      height: 160px; /* é«˜ã•ã‚’å›ºå®šã—ã¦ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå´©ã‚Œã‚’é˜²ã */
      margin-bottom: 12px;
      border-radius: 8px;
      overflow: hidden;
      background-color: var(--highlight-bg);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .q-image-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .q-text{
      margin:4px 0 12px;
      line-height:1.5;
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--ink);
    }

    .q-example{
      font-size:.85rem;
      color:var(--muted);
      background: #f8f9fa;
      padding: 8px 12px;
      border-radius: 6px;
      margin-bottom:12px;
      line-height:1.5;
      border-left: 3px solid #cbd5e1;
    }

    .point-label{
      font-size:.75rem;
      font-weight:700;
      color:var(--accent);
      letter-spacing:.05em;
      margin-bottom: 4px;
    }

    .point-box{
      font-size:.9rem;
      line-height:1.6;
      color: var(--ink);
    }

    .btn-back{
      background:transparent;
      color:var(--muted);
      border:1px solid transparent;
      border-radius:999px;
      padding:4px 0;
      font-size:.9rem;
      cursor:pointer;
      white-space:nowrap;
    }
    .btn-back:hover{
      text-decoration:underline;
    }

    /* --- ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ --- */
    .btn-row{
      flex:0 0 auto;
      margin-top:auto;
      padding-top: 16px;
      border-top: 1px solid var(--border);
      display:flex;
      justify-content:flex-end;
      gap:16px;
    }

    button{
      border-radius:999px;
      border:1px solid transparent;
      padding:10px 24px;
      font-size:1rem;
      font-weight: 600;
      cursor:pointer;
      font-family:inherit;
      background:#fff;
      transition:all .2s ease;
    }

    button:active{
      transform:translateY(2px);
    }

    .btn-yes{
      background:var(--accent);
      color:#fff;
      box-shadow: 0 4px 10px rgba(87,136,153,0.3);
    }
    .btn-yes:hover{
      background:var(--accent-dark);
      box-shadow: 0 6px 14px rgba(87,136,153,0.4);
    }

    .btn-no{
      background:#fff;
      color:var(--accent);
      border: 1px solid var(--accent);
    }
    .btn-no:hover{
      background:var(--accent-soft);
    }

    /* --- çµæœç”»é¢ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ --- */
    .result-actions {
      display: flex;
      justify-content: space-between;
      margin-bottom: 16px;
    }

    .btn-again{
      background:#fff;
      color:var(--accent-dark);
      border:1px solid var(--border);
      font-size:.9rem;
      padding: 6px 16px;
    }
    .btn-again:hover{
      background:#eef3f6;
      border-color: var(--accent);
    }

    .btn-print {
      background: var(--ink);
      color: #fff;
      font-size: .9rem;
      padding: 6px 16px;
    }
    .btn-print:hover {
      background: #3a4b4e;
    }

    /* --- çµæœç”»é¢ãƒ‡ã‚¶ã‚¤ãƒ³ --- */
    .result{
      display:none;
      margin-top:12px;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .result-card {
      height: auto; 
    }

    .result h2{
      margin-top:0;
      margin-bottom:.5rem;
      font-size: 1.4rem;
      color: var(--accent-dark);
      border-bottom: 2px solid var(--accent-soft);
      padding-bottom: 8px;
    }

    .badge{
      display:inline-block;
      padding:4px 12px;
      font-size:.9rem;
      font-weight: bold;
      border-radius:999px;
      background:var(--accent-soft);
      color:var(--accent-dark);
    }

    .recommend-box {
      text-align: center;
      background: linear-gradient(135deg, #ffffff 0%, #f4f9fb 100%);
      border: 2px solid var(--accent);
      border-radius: 12px;
      padding: 24px;
      margin: 20px 0;
      box-shadow: 0 8px 24px rgba(87, 136, 153, 0.15);
      page-break-inside: avoid; /* å°åˆ·æ™‚ã«é€”ä¸­ã§åˆ‡ã‚Œãªã„ã‚ˆã†ã« */
    }

    .recommend-label {
      font-size: 0.9rem;
      color: var(--muted);
      margin-bottom: 8px;
      display: block;
      font-weight: bold;
    }

    .recommend-name {
      display: block;
      font-size: 2.2rem;
      font-weight: 800;
      color: var(--accent-dark);
      letter-spacing: 0.05em;
      line-height: 1.2;
      margin-bottom: 16px;
    }

    .recommend-link {
      display: inline-block;
      text-decoration: none;
      background: var(--accent-dark);
      color: #fff;
      padding: 8px 24px;
      border-radius: 999px;
      font-size: 0.95rem;
      font-weight: bold;
      transition: background 0.2s;
    }
    .recommend-link:hover {
      background: var(--accent);
    }
    .recommend-link::after {
      content: " >";
      margin-left: 6px;
    }

    .summary-grid{
      display:grid;
      grid-template-columns:minmax(0,2fr) minmax(0,3fr);
      gap:24px;
      margin-top:24px;
      align-items:flex-start;
      border-top: 1px solid var(--border);
      padding-top: 24px;
    }

    @media (max-width:720px){
      .summary-grid{
        grid-template-columns:1fr;
      }
      .question-card {
        height: 680px; 
        padding: 16px;
      }
      .q-text {
        font-size: 1.2rem;
      }
      .recommend-name {
        font-size: 1.8rem;
      }
    }

    .summary-grid h3{
      margin:0 0 12px;
      font-size:1.1rem;
      color: var(--accent-dark);
    }

    .summary-grid ul{
      margin:0;
      padding:0 0 0 1.2rem;
      font-size:.95rem;
      color: var(--ink);
    }
    .summary-grid li {
      margin-bottom: 6px;
    }

    .answers-table{
      width:100%;
      border-collapse:collapse;
      font-size:.9rem;
      margin-top:24px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.03);
    }

    .answers-table th,
    .answers-table td{
      border:1px solid var(--border);
      padding:10px 12px;
      vertical-align:top;
    }

    .answers-table th{
      background:#f3f6f8;
      text-align:left;
      font-weight:600;
      color: var(--accent-dark);
      white-space: nowrap;
    }

    .answer-yes{
      color:#00695c;
      font-weight:bold;
      background: rgba(0, 105, 92, 0.05);
      text-align: center;
    }

    .answer-no{
      color:#b71c1c;
      font-weight:bold;
      text-align: center;
    }

    .note{
      margin-top:20px;
      padding: 16px;
      background: #fafafa;
      border-radius: 8px;
      font-size:.8rem;
      color:var(--muted);
      line-height:1.6;
    }

    #categoryBar{
      max-width:100%;
      height: auto;
    }

    /* --- å°åˆ·ç”¨ã‚¹ã‚¿ã‚¤ãƒ« --- */
    @media print {
      body { background: #fff; color: #000; -webkit-print-color-adjust: exact; print-color-adjust: exact;}
      .app { max-width: 100%; margin: 0; padding: 0; }
      .progress, .btn-row, .btn-back, .result-actions, .recommend-link { display: none !important; }
      .question-card { box-shadow: none; border: none; padding: 0; height: auto; }
      .recommend-box { border: 1px solid #000; box-shadow: none; background: #fff; }
      .answers-table th { background: #eee !important; color: #000; }
      .answer-yes { color: #000; font-weight: bold; }
      .answer-no { color: #666; }
      h1 { font-size: 1.4rem; color: #000; }
      p, li, td { color: #000; }
      .note { border: 1px solid #ddd; background: #fff; color: #444; }
      /* ã‚°ãƒ©ãƒ•ã¯å°åˆ·ç’°å¢ƒã«ã‚ˆã£ã¦ã¯è¡¨ç¤ºã•ã‚Œãªã„å ´åˆãŒã‚ã‚Šã¾ã™ãŒã€Canvasè‡ªä½“ã¯ä¿æŒã—ã¾ã™ */
    }
  </style>
</head>
<body>
<div class="app">
  <h1>FXã‚¯ãƒ©ã‚¦ãƒ‰ã‚·ãƒªãƒ¼ã‚º å°å…¥è¨ºæ–­ãƒãƒ£ãƒ¼ãƒˆ</h1>
  <p class="intro-text">
    è²´ç¤¾ã®çµŒç†ä½“åˆ¶ã‚„ã”è¦æœ›ã«ã¤ã„ã¦ã€YESï¼NOã‚’é¸ã¶ã ã‘ã§æœ€é©ãªã€ŒFXã‚¯ãƒ©ã‚¦ãƒ‰ã‚·ãƒªãƒ¼ã‚ºã€ã®æ§‹æˆã‚’ã”ææ¡ˆã—ã¾ã™ã€‚
  </p>

  <div class="progress">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <div id="questionArea" class="question-card"></div>

  <div id="resultArea" class="result"></div>
</div>

<!-- ã‚°ãƒ©ãƒ•ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆæ¨ªæ£’ã‚°ãƒ©ãƒ•ï¼‰ -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  // è¨­å•ãƒ‡ãƒ¼ã‚¿ï¼ˆç”»åƒURLã‚’è¿½åŠ ï¼‰
  const questions = [
    {
      id: "accountsStructure",
      title: "ï¼‘ï¼å‹˜å®šç§‘ç›®ä½“ç³»",
      category: "ä¼šè¨ˆãƒ»ç®¡ç†ä¼šè¨ˆ",
      question: "å‹˜å®šç§‘ç›®ï¼ˆå£²ä¸Šé«˜ã€ä»•å…¥é«˜ã€è²©ç®¡è²»ç­‰ï¼‰ã‚’è‡ªç”±ã«è¨­è¨ˆã—ãŸã„ã§ã™ã‹ï¼Ÿ",
      point: "è²¡å‹™ä¸‰è¡¨ç§‘ç›®ã¨ã¯ç•°ãªã‚‹å‹˜å®šç§‘ç›®ï¼ˆã‚³ãƒ¼ãƒ‰ï¼‰ã§ã®è¨­è¨ˆãŠã‚ˆã³è¿½åŠ ã€ä¸¦ã¹æ›¿ãˆãŒã§ãã¾ã™ã€‚ã¾ãŸã€è¤‡æ•°ã®ç§‘ç›®æ®‹é«˜ã‚’åˆç®—ã™ã‚‹ã€Œå°è¨ˆç§‘ç›®ã€ã®ç™»éŒ²ã€è²¸å€Ÿå¯¾ç…§è¡¨ç§‘ç›®ã®éƒ¨é–€åˆ¥æ®‹é«˜ç®¡ç†ã‚‚ã§ãã¾ã™ã€‚",
      example: "ä¾‹:å£²ä¸Šãƒ»ä»•å…¥ç§‘ç›®æ•°ã‚’4ã¤ä»¥ä¸Šè¨­å®šã™ã‚‹",
      image: "https://placehold.co/600x200/eef3f6/578899?text=Account+Structure"
    },
    {
      id: "subAccount",
      title: "ï¼’ï¼åŒä¸€ç§‘ç›®ã®å–å¼•å…ˆåˆ¥ã€å£åº§åˆ¥ç®¡ç†ä½µç”¨",
      category: "ä¼šè¨ˆãƒ»ç®¡ç†ä¼šè¨ˆ",
      question: "å‹˜å®šç§‘ç›®ã”ã¨ã«è¤‡æ•°ï¼ˆå£åº§åˆ¥ãƒ»å–å¼•å…ˆåˆ¥ç­‰ï¼‰ã®æ®‹é«˜ç®¡ç†ãŒã—ãŸã„ã§ã™ã‹ï¼Ÿ",
      point: "ï¼‘ã¤ã®å‹˜å®šç§‘ç›®ã«å¯¾ã—ã¦å–å¼•å…ˆåˆ¥ï¼‹å£åº§åˆ¥ç­‰ã®ä½µç”¨ç®¡ç†ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€é ã‚Šé‡‘ã‚’å–å¼•å…ˆï¼ˆç¤¾å“¡Aã€œã€å–å¼•å…ˆAã€œï¼‰ï¼‹å£åº§åˆ¥ï¼ˆæºæ³‰æ‰€å¾—ç¨ã€ç¤¾ä¼šä¿é™ºæ–™ç­‰ï¼‰ã®ã‚ˆã†ãªé‹ç”¨ãŒå¯èƒ½ã§ã™ã€‚",
      example: "ä¾‹:å„æœˆã®å£²ä¸Šã‚’å–å¼•å…ˆæ¯ã¨å•†å“ã‚«ãƒ†ã‚´ãƒªãƒ¼æ¯ã‚’åŒæ™‚ã«æ®‹é«˜ç®¡ç†ã™ã‚‹",
      image: "https://placehold.co/600x200/eef3f6/578899?text=Multi+Balance+Check"
    },
    {
      id: "deptPerformance",
      title: "ï¼“ï¼éƒ¨é–€æ¥­ç¸¾ç®¡ç†",
      category: "éƒ¨é–€ç®¡ç†",
      question: "éƒ¨é–€ã‚’éšå±¤åˆ¥ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã«ç®¡ç†ã—ãŸã„ã§ã™ã‹ï¼Ÿ",
      point: "éƒ¨é–€éšå±¤æ§‹é€ ã‚’å¤šæ®µéšã§è¨­è¨ˆã§ãã¾ã™ã€‚ã¾ãŸã€éƒ¨é–€éšå±¤ã¨ã¯ç•°ãªã‚‹è¦–ç‚¹ã§ã®éƒ¨é–€æ¥­ç¸¾ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã®éƒ¨é–€ã‚°ãƒ«ãƒ¼ãƒ—è¨­è¨ˆã‚‚ã§ãã¾ã™ã€‚",
      example: "ä¾‹:åœ°åŸŸæ¯ãƒ»åº—èˆ—æ¯ãƒ»æ‹…å½“è€…æ¯ã®æ¥­ç¸¾ç®¡ç†<br>å‚µæ¨©å‚µå‹™ã®å–å¼•å…ˆåˆ¥æ®‹é«˜ã‚’éƒ¨é–€ã”ã¨ã«ç®¡ç†ã€æœ¬æ”¯åº—ä¼šè¨ˆã‚’éƒ¨é–€ã§è¡Œã†",
      image: "https://placehold.co/600x200/eef3f6/578899?text=Department+Management"
    },
    {
      id: "deptPermission",
      title: "ï¼”ï¼éƒ¨é–€å‚ç…§ï¼ˆå…¥åŠ›ï¼‰æ¨©é™",
      category: "éƒ¨é–€ç®¡ç†ãƒ»çµ±åˆ¶",
      question: "çµŒç†æ‹…å½“è€…ã”ã¨ã«å‚ç…§å¯èƒ½éƒ¨é–€ã‚’åˆ¶é™ã—ãŸã„ã§ã™ã‹ï¼Ÿ",
      point: "çµŒç†æ‹…å½“è€…ã”ã¨ã«ç‰¹å®šã®éƒ¨é–€ã®ã¿å…¥åŠ›ãƒ»æ¥­ç¸¾é–²è¦§ã‚’å¯ã¨ã™ã‚‹å‚ç…§æ¨©é™ã‚’è¨­å®šã§ãã¾ã™ã€‚ã¾ãŸã€çµŒç†æ‹…å½“è€…ã”ã¨ã«åˆ©ç”¨å¯èƒ½ãªãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®åˆ¶é™ã‚‚ã§ãã¾ã™ã€‚",
      example: "ä¾‹:è‡ªéƒ¨é–€ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿é–²è¦§ãƒ»å…¥åŠ›ã§ãã‚‹ã‚ˆã†ã«åˆ¶é™ã™ã‚‹",
      image: "https://placehold.co/600x200/eef3f6/578899?text=Access+Control"
    },
    {
      id: "voucherWorkflow",
      title: "ï¼•ï¼è¨¼æ†‘ä¿å­˜",
      category: "è¨¼æ†‘ä¿å­˜ãƒ»å†…éƒ¨çµ±åˆ¶",
      question: "è¨¼æ†‘ä¿å­˜æ©Ÿèƒ½ã‚’çµŒç†æ‹…å½“ä»¥å¤–ã§ã‚‚åˆ©ç”¨ã—ãŸã„ã§ã™ã‹ï¼Ÿ",
      point: "ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€Œã‚¤ãƒ³ãƒœã‚¤ã‚¹ãƒ»ãƒãƒã‚¸ãƒ£ãƒ¼ï¼ˆFX4ã‚¯ãƒ©ã‚¦ãƒ‰ï¼‰ã€ã¯ã€FX4ã‚¯ãƒ©ã‚¦ãƒ‰æœªç™»éŒ²ã®ãƒ‘ã‚½ã‚³ãƒ³ã‹ã‚‰è¨¼æ†‘ã‚’ä¿å­˜ã§ãã¾ã™ã€‚ã¾ãŸã€å¤šæ®µéšæ‰¿èªæ©Ÿèƒ½ã‚’æ´»ç”¨ã—ãŸçµŒè²»ç”³è«‹ã€œä¸Šé•·ã®æ‰¿èªã€œçµŒç†æ‹…å½“ã®æ‰¿èªã€œä¿å­˜ï¼†ä»•è¨³è¨ˆä¸Šã‚‚ã§ãã¾ã™ã€‚",
      example: "ä¾‹:å„éƒ¨é–€ã‚„æ”¯åº—ã®ãƒ‘ã‚½ã‚³ãƒ³ã‹ã‚‰è¨¼æ†‘ã‚’ä¿å­˜ã™ã‚‹",
      image: "https://placehold.co/600x200/eef3f6/578899?text=Voucher+Storage"
    },
    {
      id: "excelJournal",
      title: "ï¼–ï¼Excelã‹ã‚‰ã®ä»•è¨³è¨ˆä¸Š",
      category: "ä»•è¨³è‡ªå‹•åŒ–",
      question: "Excelé›†è¨ˆè¡¨ç­‰ã‹ã‚‰ä»•è¨³ã‚’è¨ˆä¸Šã—ãŸã„ã§ã™ã‹ï¼Ÿ",
      point: "Excelä½œæˆã®æ—¥å ±ã‚„å‡ºç´å¸³ã‹ã‚‰FX4ã‚¯ãƒ©ã‚¦ãƒ‰ã‚’èµ·å‹•ã•ã›ã‚‹ã“ã¨ãªãä»•è¨³ã‚’è¨ˆä¸Šã§ãã¾ã™ã€‚ã¾ãŸã€MRè¨­è¨ˆãƒ„ãƒ¼ãƒ«ã¨ä½µç”¨ã—ãŸé‹ç”¨ï¼ˆéƒ¨é–€å…±é€šè²»ã®éƒ¨é–€é…è³¦ç­‰ï¼‰ã‚‚ã§ãã¾ã™ã€‚",
      example: "ä¾‹:ä¼æ¥­ãŒExcelã§ä½œæˆã—ã¦ã„ã‚‹æ—¥å ±ã‚„å‡ºç´å¸³ã‹ã‚‰ä»•è¨³ã‚’è¨ˆä¸Šã™ã‚‹",
      image: "https://placehold.co/600x200/eef3f6/578899?text=Excel+Import"
    },
    {
      id: "systemJournal",
      title: "ï¼—ï¼æ¥­å‹™ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã®ä»•è¨³è¨ˆä¸Š",
      category: "ä»•è¨³è‡ªå‹•åŒ–",
      question: "æ¥­å‹™ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ä»•è¨³ã‚’è¨ˆä¸Šã—ãŸã„ã§ã™ã‹ï¼Ÿ",
      point: "ä»•è¨³èª­è¾¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨­è¨ˆæ©Ÿèƒ½ã«ã‚ˆã‚Šã€æ¥­å‹™ã‚·ã‚¹ãƒ†ãƒ ã®å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ã‚’åŠ å·¥ã™ã‚‹ã“ã¨ãªãä»•è¨³ã‚’è¨ˆä¸Šã§ãã¾ã™ã€‚ç´°ã‹ãªå˜ä½ã®ä»•è¨³ã‚’æ‰‹é–“ãªãè¨ˆä¸Šã™ã‚‹ã“ã¨ã§ã€FX4ã‚¯ãƒ©ã‚¦ãƒ‰ã‚’æ´»ç”¨ã—ãŸè©³ç´°ãªè²¡å‹™åˆ†æãŒå¯èƒ½ã§ã™ã€‚",
      example: "ä¾‹:è²©å£²ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å£²ä¸Šãƒ»å…¥é‡‘ä»•è¨³ã‚’è¨ˆä¸Šã™ã‚‹",
      image: "https://placehold.co/600x200/eef3f6/578899?text=System+Linkage"
    },
    {
      id: "groupManagement",
      title: "ï¼˜ï¼ä¼æ¥­ã‚°ãƒ«ãƒ¼ãƒ—æ¥­ç¸¾ç®¡ç†",
      category: "ã‚°ãƒ«ãƒ¼ãƒ—ç®¡ç†",
      question: "ã‚°ãƒ«ãƒ¼ãƒ—ä¼šç¤¾å…¨ä½“ã®æ¥­ç¸¾ã‚’ä¸€å…ƒç®¡ç†ã—ãŸã„ã§ã™ã‹ï¼Ÿ",
      point: "ã‚°ãƒ«ãƒ¼ãƒ—ä¼šç¤¾ã§FX4ã‚¯ãƒ©ã‚¦ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€å†…éƒ¨å–å¼•ã‚’ç›¸æ®ºã—ãŸã‚°ãƒ«ãƒ¼ãƒ—æ¥­ç¸¾ç®¡ç†ãŒã§ãã¾ã™ã€‚ã¾ãŸã€ä»•è¨³å…¥åŠ›ã‚„è¨¼æ†‘ä¿å­˜æ–¹æ³•ãªã©ã€ã‚°ãƒ«ãƒ¼ãƒ—å…¨ä½“ã®çµŒç†å‡¦ç†ã‚’çµ±ä¸€ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚",
      example: "ä¾‹:ã‚°ãƒ«ãƒ¼ãƒ—å…¨ä½“æ¥­ç¸¾ã‚’ã‚¿ã‚¤ãƒ ãƒªãƒ¼ã‹ã¤åŠ¹ç‡çš„ã«ç®¡ç†ã™ã‚‹",
      image: "https://placehold.co/600x200/eef3f6/578899?text=Group+Management"
    },
    {
      id: "ipoControl",
      title: "ï¼™ï¼æ ªå¼ä¸Šå ´",
      category: "å†…éƒ¨çµ±åˆ¶ãƒ»IPO",
      question: "æ ªå¼ä¸Šå ´ï¼ˆIPOï¼‰ã—ã¦ã„ã‚‹ã€ã¾ãŸã¯è¦–é‡ã«å…¥ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
      point: "ITå…¨èˆ¬çµ±åˆ¶ãƒ»ITæ¥­å‹™å‡¦ç†çµ±åˆ¶ã®å¯¾å¿œç­‰ã«ã‚ˆã‚Šã€å†…éƒ¨çµ±åˆ¶ç­‰ã¸ã®å¯¾å¿œãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ä¸Šå ´ä¼æ¥­ã§ã‚‚åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚ãªãŠã€ã€Œå—è¨—æ¥­å‹™ã«ä¿‚ã‚‹å†…éƒ¨çµ±åˆ¶ã®ä¿è¨¼å ±å‘Šæ›¸ã€ï¼ˆ3402ç›£æŸ»å ±å‘Šæ›¸ï¼‰ã‚’ç„¡å„Ÿã§æä¾›ã—ã¦ã„ã¾ã™ã€‚",
      example: "",
      image: "https://placehold.co/600x200/eef3f6/578899?text=IPO+Support"
    },
    {
      id: "deptPermissionFx2",
      title: "ï¼‘ï¼ï¼éƒ¨é–€å‚ç…§ï¼ˆå…¥åŠ›ï¼‰æ¨©é™ï¼ˆFX2ç­‰ï¼‰",
      category: "éƒ¨é–€ç®¡ç†ãƒ»çµ±åˆ¶",
      question: "éƒ¨é–€æ¥­ç¸¾ã‚’ç®¡ç†ã—ãŸã„ã€ã¾ãŸã¯åˆ©ç”¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’åˆ¶é™ã—ãŸã„ã§ã™ã‹ï¼Ÿ",
      point: "éƒ¨é–€åˆ¥ï¼ˆå¤šæ®µéšã§ç™»éŒ²ã™ã‚‹å ´åˆã¯FX4ã‚¯ãƒ©ã‚¦ãƒ‰ï¼‰ã§ã®æ¥­ç¸¾ç®¡ç†ãŒã§ãã¾ã™ã€‚ã¾ãŸã€çµŒç†æ‹…å½“è€…ã”ã¨ã«åˆ©ç”¨å¯èƒ½ãªãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®åˆ¶é™ã‚‚ã§ãã¾ã™ã€‚",
      example: "â€»éƒ¨é–€åˆ¥ã®æ¥­ç¸¾ç®¡ç†ãŒå¯èƒ½ã§ã™ã€‚",
      image: "https://placehold.co/600x200/eef3f6/578899?text=Dept+Management"
    },
    {
      id: "payManagement",
      title: "ï¼‘ï¼‘ï¼æ”¯æ‰•ç®¡ç†æ©Ÿèƒ½",
      category: "ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼šæ”¯æ‰•ç®¡ç†",
      question: "æ”¯æ‰•ã‚’ã‚·ã‚¹ãƒ†ãƒ ã§ç®¡ç†ã—ãŸã„ã€ã¾ãŸã¯æ”¯æ‰•ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆã¾ã§è¡Œã„ãŸã„ã§ã™ã‹ï¼Ÿ",
      point: "å£²æ›é‡‘ã®å›åã€è²·æ›é‡‘ã®æ”¯æ‰•ã„ã€å€Ÿå…¥é‡‘ã®è¿”æ¸ˆã€æ‰‹å½¢ã®æ±ºæ¸ˆäºˆå®šç­‰ã®æ§˜ã€…ãªå…¥é‡‘ãƒ»æ”¯æ‰•äºˆå®šã‚’ç¶²ç¾…ã—ãŸã€Œè³‡é‡‘ç¹°ã‚Šè¨ˆç”»ç”¨ã€ã‚’ä½œæˆã§ãã¾ã™ã€‚",
      example: "ä¾‹:ä»•å…¥ä»•è¨³ã‚’å…ƒã«æ”¯æ‰•äºˆå®šã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å½¢å¼ã§ç®¡ç†ã€éŠ€è¡ŒæŒ¯è¾¼ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ",
      image: "https://placehold.co/600x200/eef3f6/578899?text=Payment+Management"
    },
    {
      id: "payroll",
      title: "ï¼‘ï¼’ï¼çµ¦ä¸è¨ˆç®—æ©Ÿèƒ½",
      category: "ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼šçµ¦ä¸è¨ˆç®—",
      question: "çµ¦ä¸è¨ˆç®—ã‚’ã™ã‚‹ç¤¾å“¡æ•°ãŒ30äººä»¥ä¸Šã€ã¾ãŸã¯è¤‡æ•°äº‹æ¥­æ‰€ã§ã™ã‹ï¼Ÿ",
      point: "çµŒå–¶è€…ã«ã‚ˆã‚‹è³ƒé‡‘ã®é©æ­£ãªé…åˆ†ã®æ±ºå®šã¨çµ¦ä¸äº‹å‹™ã®åˆç†åŒ–ã‚’æ”¯æ´ã—ã¾ã™ã€‚",
      example: "â€»FXã¾ã„ã‚¹ã‚¿ãƒ¼ã‚¯ãƒ©ã‚¦ãƒ‰ã®å ´åˆã€30äººã¾ã§ã—ã‹çµ¦ä¸è¨ˆç®—ãŒè¡Œãˆã¾ã›ã‚“ã€‚",
      image: "https://placehold.co/600x200/eef3f6/578899?text=Payroll+System"
    },
    {
      id: "reportDesign",
      title: "ï¼‘ï¼“ï¼MRè¨­è¨ˆãƒ„ãƒ¼ãƒ«",
      category: "ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼šå¸³ç¥¨è¨­è¨ˆãƒ»çµŒå–¶è³‡æ–™",
      /* â†“ æŒ‡å®šé€šã‚Šå¤‰æ›´ */
      question: "ç§‘ç›®æ®‹é«˜ã‚’åæ˜ ã—ãŸçµŒå–¶ç®¡ç†ç”¨ãƒ¬ãƒãƒ¼ãƒˆã‚’ç‹¬è‡ªã«ä½œæˆã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
      point: "ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆï¼ˆMRï¼‰è¨­è¨ˆãƒ„ãƒ¼ãƒ«ã«ã‚ˆã‚Šã€FXã‚¯ãƒ©ã‚¦ãƒ‰ã‚·ãƒªãƒ¼ã‚ºã®ãƒ‡ãƒ¼ã‚¿ã‚’æ´»ç”¨ã—ãŸã‚ªãƒªã‚¸ãƒŠãƒ«å¸³è¡¨ãŒExcelã§ç°¡å˜ã«ä½œæˆã§ãã¾ã™ã€‚",
      example: "ä¾‹:Excelã‹ã‚‰FXã‚¯ãƒ©ã‚¦ãƒ‰ã‚·ãƒªãƒ¼ã‚ºã®ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•ã§å–å¾—",
      image: "https://placehold.co/600x200/eef3f6/578899?text=Report+Design"
    }
  ];

  const answers = {};
  let currentIndex = 0;
  let categoryChartInstance = null;

  function updateProgress() {
    const bar = document.getElementById("progressBar");
    const total = questions.length;
    const ratio = Math.min(currentIndex, total) / total;
    bar.style.width = (ratio * 100) + "%";
  }

  function renderQuestion() {
    const total = questions.length;
    const q = questions[currentIndex];
    const area = document.getElementById("questionArea");
    const resultArea = document.getElementById("resultArea");

    area.style.display = "flex"; 
    resultArea.style.display = "none";

    updateProgress();

    // ç”»åƒãŒã‚ã‚Œã°è¡¨ç¤ºã™ã‚‹
    const imageHtml = q.image 
      ? `<div class="q-image-container"><img src="${q.image}" alt="${q.title}ã®ã‚¤ãƒ¡ãƒ¼ã‚¸"></div>`
      : "";

    area.innerHTML = `
      <div class="q-header-row">
        <div>
          ${currentIndex > 0 ? '<button type="button" class="btn-back" id="backBtn">â† æˆ»ã‚‹</button>' : ""}
        </div>
        <div style="text-align:right;">
          <div class="q-number">Q. ${currentIndex + 1} / ${total}</div>
        </div>
      </div>
      
      <div class="q-main">
        <div class="q-title-row">
          <span class="q-category">${q.category}</span>
          <span class="q-title">${q.title}</span>
        </div>

        <!-- ç”»åƒè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        ${imageHtml}

        <div class="q-text">${q.question}</div>
        
        ${q.example ? `<div class="q-example">${q.example}</div>` : ""}
        
        <div style="margin-top:auto;">
          <div class="point-label">POINT</div>
          <div class="point-box">${q.point}</div>
        </div>
      </div>

      <div class="btn-row">
        <button type="button" class="btn-no" data-answer="no">NO</button>
        <button type="button" class="btn-yes" data-answer="yes">YES</button>
      </div>
    `;

    // YES/NO Logic
    area.querySelectorAll("[data-answer]").forEach(btn => {
      btn.addEventListener("click", () => {
        const answer = btn.getAttribute("data-answer");
        answers[q.id] = answer;
        currentIndex++;
        if (currentIndex < total) {
          renderQuestion();
        } else {
          showResult();
        }
      });
    });

    // æˆ»ã‚‹ãƒœã‚¿ãƒ³
    const backBtn = area.querySelector("#backBtn");
    if (backBtn) {
      backBtn.addEventListener("click", () => {
        currentIndex = Math.max(0, currentIndex - 1);
        renderQuestion();
      });
    }
  }

  function createCategoryBarChart(categoryStats) {
    const canvas = document.getElementById("categoryBar");
    if (!canvas || !window.Chart) return;

    const labels = Object.keys(categoryStats);
    const data = labels.map(label => {
      const s = categoryStats[label];
      if (!s || !s.total) return 0;
      return Math.round((s.yes / s.total) * 100);
    });

    const ctx = canvas.getContext("2d");

    if (categoryChartInstance) {
      categoryChartInstance.destroy();
    }

    categoryChartInstance = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [{
          label: 'YESç‡',
          data: data,
          borderWidth: 0,
          borderRadius: 4,
          backgroundColor: '#578899',
        }]
      },
      options: {
        indexAxis: 'y',
        responsive: true,
        plugins: {
          legend: { display: false },
          tooltip: {
            callbacks: {
              label: function(context) {
                return context.parsed.x + '%';
              }
            }
          }
        },
        scales: {
          x: {
            suggestedMin: 0,
            suggestedMax: 100,
            ticks: { stepSize: 20 }
          }
        }
      }
    });
  }

  function showResult() {
    const area = document.getElementById("questionArea");
    const resultArea = document.getElementById("resultArea");
    const total = questions.length;
    const yesCount = questions.filter(q => answers[q.id] === "yes").length;

    // åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
    const yesFirstBlock = questions.slice(0, 9).some(q => answers[q.id] === "yes");
    const yesSecondBlock = questions.slice(9, 13).some(q => answers[q.id] === "yes");

    let recommendedSystem = "";
    let recommendedNote = "";
    let recommendedUrl = ""; // URLç”¨å¤‰æ•°
    let level = "";
    let detail = "";

    if (yesFirstBlock) {
      recommendedSystem = "FX4ã‚¯ãƒ©ã‚¦ãƒ‰";
      recommendedUrl = "https://www.tkc.jp/fx4/";
      level = "ã‚°ãƒ«ãƒ¼ãƒ—ç®¡ç†ãƒ»å†…éƒ¨çµ±åˆ¶ã¾ã§æ„è­˜ã—ãŸé«˜åº¦æ§‹æˆ";
      detail = "å‰åŠã®è¨­å•ï¼ˆé«˜åº¦ç®¡ç†ãƒ»çµ±åˆ¶ï¼‰ã§ãƒ‹ãƒ¼ã‚ºãŒã‚ã‚‹ãŸã‚ã€FX4ã‚¯ãƒ©ã‚¦ãƒ‰ã‚’ä¸­æ ¸ã¨ã—ãŸæ§‹æˆãŒæœ›ã¾ã—ã„ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚";
      recommendedNote = "éƒ¨é–€ç®¡ç†ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—ç®¡ç†ãƒ»ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¾ã§å«ã‚ãŸåŒ…æ‹¬çš„ãªå¯¾å¿œãŒå¯èƒ½ã§ã™ã€‚";
    } else if (yesSecondBlock) {
      recommendedSystem = "FX2ã‚¯ãƒ©ã‚¦ãƒ‰";
      recommendedUrl = "https://www.tkc.jp/fx/";
      level = "ç®¡ç†ä¼šè¨ˆãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã‚’å‚™ãˆãŸæ¨™æº–æ§‹æˆ";
      detail = "æ¨™æº–çš„ãªè‡ªè¨ˆåŒ–ãƒ‹ãƒ¼ã‚ºã«åŠ ãˆã€æ”¯æ‰•ç®¡ç†ã‚„çµ¦ä¸ç­‰ã®ç‰¹å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå¿…è¦ãªæ§‹æˆã§ã™ã€‚";
      recommendedNote = "FX2ã‚¯ãƒ©ã‚¦ãƒ‰ã‚’ä¸­å¿ƒã«ã€å¿…è¦ã«å¿œã˜ã¦æ”¯æ‰•ç®¡ç†ã‚„çµ¦ä¸è¨ˆç®—ã€å¸³ç¥¨è¨­è¨ˆãªã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’çµ„ã¿åˆã‚ã›ã‚‹å½¢ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚";
    } else {
      recommendedSystem = "FXã¾ã„ã‚¹ã‚¿ãƒ¼ã‚¯ãƒ©ã‚¦ãƒ‰";
      recommendedUrl = "https://www.tkc.jp/fx/";
      level = "ã‚·ãƒ³ãƒ—ãƒ«è‡ªè¨ˆåŒ–æ§‹æˆï¼ˆå°è¦æ¨¡å‘ã‘ï¼‰";
      detail = "é«˜åº¦ãªéƒ¨é–€ç®¡ç†ç­‰ã¯ä¸è¦ãªãŸã‚ã€ã¾ãšã¯ã‚·ãƒ³ãƒ—ãƒ«ãªè‡ªè¨ˆåŒ–å°å…¥ãŒé©ã—ã¦ã„ã¾ã™ã€‚";
      recommendedNote = "å–å¼•ãŒæ¯”è¼ƒçš„ã‚·ãƒ³ãƒ—ãƒ«ã§ã€çµŒç†è² æ‹…ã‚’è»½æ¸›ã—ãŸã„å ´åˆã«é©ã—ãŸæ§‹æˆã§ã™ã€‚";
    }

    // ã‚«ãƒ†ã‚´ãƒªé›†è¨ˆ
    const categoryStats = {};
    questions.forEach(q => {
      if (!categoryStats[q.category]) {
        categoryStats[q.category] = { yes: 0, total: 0 };
      }
      categoryStats[q.category].total++;
      if (answers[q.id] === "yes") {
        categoryStats[q.category].yes++;
      }
    });

    let categoryHtml = "<ul>";
    Object.entries(categoryStats).forEach(([cat, stat]) => {
      categoryHtml += `<li>${cat}: <strong>${stat.yes}</strong> / ${stat.total}</li>`;
    });
    categoryHtml += "</ul>";

    // å›ç­”ä¸€è¦§ç”Ÿæˆ
    let answersHtml = `
      <table class="answers-table">
        <thead>
          <tr>
            <th>é …ç›®</th>
            <th>è³ªå•</th>
            <th>å›ç­”</th>
            <th>POINT</th>
          </tr>
        </thead>
        <tbody>
    `;
    questions.forEach(q => {
      const a = answers[q.id] || "-";
      const cls = a === "yes" ? "answer-yes" : (a === "no" ? "answer-no" : "");
      const label = a === "yes" ? "YES" : (a === "no" ? "NO" : "-");
      answersHtml += `
        <tr>
          <td>${q.title}</td>
          <td>${q.question}</td>
          <td class="${cls}">${label}</td>
          <td>${q.point}</td>
        </tr>
      `;
    });
    answersHtml += "</tbody></table>";

    document.getElementById("progressBar").style.width = "100%";
    area.style.display = "none";

    resultArea.innerHTML = `
      <div class="question-card result-card">
        <div class="result-actions">
          <button type="button" class="btn-again" id="btnRetry">â†º ã¯ã˜ã‚ã‹ã‚‰ã‚„ã‚Šç›´ã™</button>
          <button type="button" class="btn-print" onclick="window.print()">ğŸ–¨ï¸ çµæœã‚’å°åˆ· / PDFä¿å­˜</button>
        </div>

        <h2>è¨ºæ–­çµæœ</h2>
        <p>
          <span class="badge">YESæ•°ï¼š${yesCount} / ${total}</span>
        </p>

        <!-- ãŠã™ã™ã‚ãƒ„ãƒ¼ãƒ«åã®å¼·èª¿è¡¨ç¤º + ãƒªãƒ³ã‚¯ -->
        <div class="recommend-box">
          <span class="recommend-label">ãŠã™ã™ã‚ã®ã‚·ã‚¹ãƒ†ãƒ </span>
          <span class="recommend-name">${recommendedSystem}</span>
          <a href="${recommendedUrl}" target="_blank" class="recommend-link">è©³ã—ãã¯ã“ã¡ã‚‰</a>
        </div>

        <p style="text-align:center; margin-bottom:20px;">${recommendedNote}</p>

        <div class="summary-grid">
          <div>
            <h3>æ¨å¥¨ãƒ¬ãƒ™ãƒ«ï¼ˆå…¨ä½“åƒï¼‰</h3>
            <p><strong>${level}</strong></p>
            <p style="font-size:0.9rem; color:var(--muted);">${detail}</p>

            <h3 style="margin-top:20px;">ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®å‚¾å‘</h3>
            ${categoryHtml}
          </div>

          <div>
            <h3>ã‚«ãƒ†ã‚´ãƒªåˆ¥ YESæ¯”ç‡</h3>
            <canvas id="categoryBar"></canvas>
          </div>
        </div>

        <h3 style="margin-top:30px; color:var(--accent-dark);">å›ç­”è©³ç´°ä¸€è¦§</h3>
        ${answersHtml}

        <div class="note">
          â€» ã“ã®è¨ºæ–­çµæœã¯ç°¡æ˜“çš„ãªç›®å®‰ã§ã™ã€‚å®Ÿéš›ã®å°å…¥ã«ã‚ãŸã£ã¦ã¯ã€äº‹æ¥­è¦æ¨¡ã‚„é‹ç”¨ä½“åˆ¶ã«åˆã‚ã›ã¦è©³ç´°ãªæ¤œè¨ãŒå¿…è¦ã§ã™ã€‚<br>
          â€» è©³ã—ãã¯æ‹…å½“ã®ä¼šè¨ˆäº‹å‹™æ‰€ï¼ˆTKCä¼šå“¡äº‹å‹™æ‰€ï¼‰ã¸ã”ç›¸è«‡ãã ã•ã„ã€‚
        </div>
      </div>
    `;

    resultArea.style.display = "block";

    createCategoryBarChart(categoryStats);

    const retryBtn = document.getElementById("btnRetry");
    if (retryBtn) {
      retryBtn.addEventListener("click", () => {
        Object.keys(answers).forEach(k => delete answers[k]);
        currentIndex = 0;
        document.getElementById("progressBar").style.width = "0%";
        resultArea.style.display = "none";
        renderQuestion();
      });
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    renderQuestion();
  });
</script>
</body>
</html>

